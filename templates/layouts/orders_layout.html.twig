{% extends 'base.html.twig' %}
{% block title %}{% endblock %}
{% block body %}
	<div class="container mt-4">
        <h1 class="mb-4">{% block orders_title %}{% endblock %}</h1>
		<h2>Total :
            {% block orders_total %}{% endblock %}
        </h2>
		{% if orders|length > 0 %}
			<table class="table table-striped table-bordered">
				<thead class="thead-dark">
					<tr>
						<th>Reference</th>
						<th>Total Price</th>
						<th>Timestamp</th>
						<th>Is Paid</th>
						<th>User</th>
						<th>Delivery</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for order in orders %}
						<tr>
							<td>{{ order.reference }}</td>
							<td>{{ order.totalPrice|number_format(2, ',', '.') }} $</td>
							<td>{{ order.timestamp|date('Y-m-d H:i:s') }}</td>
							<td>{{ order.isPaid ? 'Yes' : 'No' }}</td>
							<td>{{ order.user.pseudo }}</td>
							<td>{{ order.delivery.name }}</td>
                            <td>
                            <a href="{{ path('admin_order_pdf', { reference: order.reference }) }}" class="btn btn-primary">Download PDF</a>
                            </td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
            {% block orders_pagination %}{% endblock %}
		{% else %}
			<tr>
				<td colspan="7">No orders found</td>
			</tr>
		{% endif %}
	</div>
{% endblock %}
