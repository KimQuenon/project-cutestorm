{% set firstImage = product.productImages|first %}

<div class="mb-4 w-full border-tertiary-dark shadow rounded-xl h-full flex flex-col">
    {% include "partials/_cardHeader.html.twig" with { backgroundClass: 'bg-primary-dark' } %}
    <div class="bg-white shadow-md border-2 border-tertiary-dark p-6 py-8 rounded-b-xl flex-1">
        <div class="w-full bg-primary border-2 border-tertiary-dark h-[250px] mb-4">
            {% if product.productImages|length > 0 %}
                {% set firstImage = product.productImages|first %}
                {% if firstImage is not null and firstImage.filename is defined %}
                    <img src="{{ asset('uploads/' ~ firstImage.filename) }}" alt="image of {{product.name}}" class="w-full h-full object-cover">
                {% else %}
                    <p>No image available</p>
                {% endif %}
            {% else %}
                <p>No images available</p>
            {% endif %}
        </div>
        <p class="subtitle">{{ product.name }}</p>
        <p>{{ product.description|striptags|slice(0, 50) ~ '...' }}</p>
        <div class="flex justify-between items-center mt-4">
            <a href="{{ path('product_show', {'slug': product.slug})  }}" class="w-40 btn btn-yellow">SHOW IT ></a>
            <p class="subtitle text-4xl">$ {{ product.price | number_format(2, ',', '.') }}</p>
        </div>
    </div>
</div>
