{% extends 'base.html.twig' %}

{% block title %}Order Details{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1>Order Details</h1>
    <h2>Order Reference: {{ order.reference }}</h2>
    <p><strong>Total Price:</strong> {{ order.totalPrice|number_format(2, ',', '.') }} $</p>
    <p><strong>Delivery Method:</strong> {{ order.delivery.name }}</p>
    <p><strong>Delivery Cost:</strong> {{ order.delivery.price|number_format(2, ',', '.') }} $</p>
    <h3>Items:</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Product</th>
                <th>Size</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for orderItem in order.orderItems %}
            <tr>
                <td>{{ orderItem.productVariant.product.name }}</td>
                <td>{{ orderItem.productVariant.size }}</td>
                <td>{{ orderItem.quantity }}</td>
                <td>{{ orderItem.productVariant.product.price|number_format(2, ',', '.') }} $</td>
                <td>{{ (orderItem.productVariant.product.price * orderItem.quantity)|number_format(2, ',', '.') }} $</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="{{ path('payment_stripe', { reference: order.reference }) }}" class="btn btn-success">Payer</a>
    <a href="{{ path('orders_index') }}" class="btn btn-secondary">Back to Orders</a>
</div>
{% endblock %}