{% extends "base.html.twig" %}

{% block title %}New post{% endblock %}

{% form_theme myForm _self %}

{% block body %}
    <div class="container mx-auto p-4 mt-4">
        <h1 class="text-3xl font-bold mb-4">New post</h1>

        {{ form_start(myForm) }}
            {{ form_row(myForm.title) }}
            {{ form_row(myForm.description) }}

            <div id="images-wrapper"
                 data-prototype="{{ form_widget(myForm.postImages.vars.prototype)|e('html_attr') }}"
                 data-index="{{ myForm.postImages|length }}">
                {% for postImage in myForm.postImages %}
                    <div class="image-form flex flex-wrap mb-3">
                        <div class="w-full md:w-1/2 xl:w-1/3 p-4">
                            {{ form_widget(postImage) }}
                        </div>
                        <div class="w-full md:w-1/2 xl:w-1/3 p-4">
                            <button type="button" class="remove-image bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">X</button>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <button type="button" id="add-image" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">Add Image</button>
            {{ form_row(myForm.commentDisabled) }}
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Share</button>
        {{ form_end(myForm) }}
    </div>
{% endblock %}

{% block form_row %}
    <div class="form-group mb-4">
        <div class="flex flex-wrap">
            <div class="w-full md:w-1/2 xl:w-1/3 p-4">
                {{ form_label(form) }}
            </div>
            <div class="w-full md:w-1/2 xl:w-1/3 p-4">
                {{ form_widget(form) }}
                {{ form_errors(form) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('imgActions') }}
{% endblock %}